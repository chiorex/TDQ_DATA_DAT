---
layout: default
title: リッチのメガンテバグ
update: 2024-03-02
---

## 現象

![bug003_3](https://gist.github.com/assets/22233327/88d5a3e3-3b06-4941-937a-79b084174ba3)
![bug003_4](https://gist.github.com/assets/22233327/775764bb-442c-42f4-b4f9-1add678e6eb9)

盗賊本家のボス戦で、リッチが自分のメガンテで __砕け散る__ と、バトル終了後にコマンドの __どうぐ__ や __そうび__ で仲間の名前が消えてしまう

* マホカンタでメガンテを反射すると発生する可能性がある
* メダパニでリッチが混乱していると発生する可能性がある
* バトルに参加したパーティ全員にバグが発生する
* バグが起きてしまったら直すことが出来ない
	* セーブデータに記録されてしまう
	* 不用意にカーソルを動かすとフリーズしてしまう
* リッチが砕け散らなかった場合はバグが起きない

	<video width="320" height="240" controls poster="https://gist.github.com/assets/22233327/3c194e99-a9dd-4247-8f1b-099ad976fd6c"><source src="https://gist.github.com/assets/22233327/7a16500d-1a91-4b20-be38-707a0e6f0417" type="video/mp4"></video>
	<video width="320" height="240" controls poster="https://gist.github.com/assets/22233327/0dfab24f-788c-419e-8b23-671b2a9dcb99"><source src="https://gist.github.com/assets/22233327/88425406-f807-48d4-af0e-5af283b4652b" type="video/mp4"></video>


## 発生原理

魔物が1ターンに二度死ぬことによって、
通常ありえない[学習内容（セーブデータ）](ai_save.md)の個人エリア255番目にフラグが立ってしまっている。
個人エリア255番目はアイテムを渡せないキャラにするフラグであるため、
コマンドの __どうぐ__ や __そうび__ で仲間の名前が消えてしまうことになる。

* リッチの一度目の死亡でワークエリアの魔物IDが-1(=$ff)に初期化された後、
二度目の死亡で魔物ID=255(=$ff)を撃破した扱いになっている
	* パーティ全員の個人エリアにフラグが立つのは自滅のため？
* マネマネのリッチもどきでもバグが発生する可能性がある
* 爆弾岩にはメガンテが効かないのでバグが起きない


## 活用例

危険なバグである反面、様々な現象を起こすことが可能となる。
[コマンドの道具や装備で仲間の名前が消える](bug100.md)を参照。

## 関連項目

* [バグ](bug.md)
	* [コマンドの道具や装備で仲間の名前が消える](bug100.md)
